Pinned
=========

### Live Notifications System Pinned to a Map


A small app used to create notifications assosiated with a geo-location by clicking on a map.

**Have a look at a live website here - [shrouded-atoll-1527.herokuapp.com]**  
(please allow some time for the app to load at the first time, as the free heroku account has a hibernation feature to save resources)

Installation
-------------

Follow this if you want to run the code yourself:  
```sh
git clone https://github.com/ZAQAZA/pinned.git
cd pinned
npm install
npm start
```
Goto http://localhost:PORT (PORT is 8080 or ENV.PORT)  
Note, you need an internet connection for the app to work because of the WAZE API.

General Architecture
--------------------

- The app is almost enirely client-side.
- A small [node.js] server is used to serve all application assets (js, css and templates). Compilation of stylus and coffeescript happens per request of first use.
- The server also provides a proxy-API for the provided WAZE API (because of the same-origin policy).
- On the client I used [backbone.js] for seperation of models and view-controllers.
- A collection of all available notification is maintained on the client and periodically merged with new updates from the server.
- I used coffeescript for both on the server and the client.
- Stylus for the css.
- Handlebars for HTML templates.


What I Have Used
----------------
To complete the task I used the following libraries/projects
- [node.js] - The server that serves the app and proxies WAZE API. I used the following node.js modules:
    - [express.js] - For routing, and using connect-middlewares.
    - [request] - For proxing the API requests.
    - [coffee-script] - For a coffeescript compiler. Both on the server, and of request-time client side javascripts.
    - [connect-coffee-script] - For a middleware that uses the coffe-script module to compile coffeescript assets on request.
    - [stylus] - For compiling stylus files to css.
- [backbone.js] - For an MV* separation of responsibilities.
    - [jQuery] - (backbone dependency)
    - [underscore] - (backbone dependency)
- [require.js] - For module loading.
- [handlebars.js] - For HTML templating.
- [leaflet.js] - For a map implementation. 
- [bootstrap] - For a nice css framwork.

Directory Structure
-------------------
- **app** - The main client backbone application. In here are the models, views, helpers and bootstraping of the app. This folder is compiled into the public/js folder.
    - **models**
        - *model.coffee* - Provides easy access to the main collections used in the app.
        - *notification.coffee* - The notification model.
        - *notifications.coffee* - model.coffee defines all 4 collections of notifications used in the system. They are all instances of the class defined in this file.
    - **views**
        - *app.coffee* - Bootsraping the app's view, and keeping it up-to-date ith periodic pulling from the server.
        - *map.coffee* - Draws the map and the notifications as pins on the map.
        - *notification.coffee* - The view of a single notification on the list.
        - *notifications.coffee* - Represent the notification list view.
        - *pin.coffee* - A view of a notification as a pin on the map
        - *stats.coffee* - A view for statistics ("showing x of y notifications")
    - *main.coffee* - Require.js configuration.
    - *app.coffee* - Just creating the AppView (views/app.coffee) for bootstrap everything.
    - *helpers.coffee* - Helper methods used in the templates.
    - *utils.coffee* - Some small utils I needed.
- **public** - Static javascripts, css, html and images files (well, only one html file). The application is compiled at run time from the app and stylus folders, into the public/js and public/css folders.
- **stylus** - The source of public/css folder.
- **templates** - Contains .handlebars templates files, which are served statically and used by the client app. Every HTML in the app is either coming from these templates or public/index.html (very small file).
- **vendor** - statically served 3rd party assets used by the client app.
- **node_modules** - node's modules dependencies. automatically generated by npm install.
- *server.coffee* - Server main file.
- *configure.coffee* - Declaring connect middlewares.
- *waze.coffee*  - Handles the proxy-API to the WAZE server.
- *package.json* - npm dependencies file.
- *Procfile* - Heroku's web proccess configuration.
- *README.md* - This document :)


  [shrouded-atoll-1527.herokuapp.com]: http://shrouded-atoll-1527.herokuapp.com/
  [backbone.js]: http://documentcloud.github.io/backbone/
  [node.js]: http://nodejs.org
  [express.js]: http://expressjs.com/
  [request]: https://github.com/mikeal/request
  [coffee-script]: https://github.com/jashkenas/coffee-script/
  [connect-coffee-script]: https://github.com/wdavidw/node-connect-coffee-script
  [stylus]: https://github.com/LearnBoost/stylus
  [bootstrap]: http://twitter.github.com/bootstrap/
  [jQuery]: http://jquery.com  
  [underscore]: http://underscorejs.org/
  [require.js]: http://requirejs.org/
  [handlebars.js]: http://handlebarsjs.com/
  [leaflet.js]: http://leafletjs.com/ 
